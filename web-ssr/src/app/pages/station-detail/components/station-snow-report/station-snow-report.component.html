<!-- Snow Report Card -->
<div class="bg-white rounded-xl shadow-lg p-6">
  <div
    class="flex flex-col gap-2 mb-6 md:flex-row md:items-center md:justify-between"
  >
    <div class="flex items-center gap-4">
      <h2 class="text-2xl font-bold text-slate-900">
        ‚ùÑÔ∏è <span data-i18n="snow_report.title">Parte de Nieve</span>
      </h2>
      <span class="text-sm text-slate-500">
        <span data-i18n="snow_report.updated">Actualizado:</span>
        {{ snowReport().updatedAt }}
      </span>
    </div>
    <button
      class="inline-flex items-center gap-3 font-bold py-3 px-6 rounded-2xl shadow-xl bg-primary-600 text-white border-2 border-primary-400 hover:bg-primary-700 hover:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-all duration-200 text-shadow-lg"
      (click)="goToWeatherHandler()"
      aria-label="Ver parte de nieve completo"
      style="
        box-shadow: 0 12px 32px -8px rgba(0, 0, 0, 0.18);
        font-size: 1.15rem;
        letter-spacing: 0.01em;
        text-shadow: 0 2px 8px rgba(0, 0, 0, 0.18), 0 0px 1px #000;
      "
    >
      <svg
        width="22"
        height="22"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
        class="mr-2"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M21 21l-4.35-4.35M11 19a8 8 0 100-16 8 8 0 000 16z"
        />
      </svg>
      <span>Ver parte de nieve completo</span>
    </button>
  </div>

  <!-- Main Snow Stats Grid -->
  <div class="grid grid-cols-2 md:grid-cols-3 gap-4 mb-6">
    <!-- Snow Base -->
    <div class="text-center p-4 bg-blue-50 rounded-lg">
      <div class="text-3xl md:text-4xl font-bold text-blue-600">
        {{ snowReport().snowBase }}
      </div>
      <div class="text-sm text-slate-600 mt-1">
        <span data-i18n="snow.base">Base</span> (cm)
      </div>
    </div>

    <!-- Snow Top -->
    <div class="text-center p-4 bg-blue-50 rounded-lg">
      <div class="text-3xl md:text-4xl font-bold text-blue-600">
        {{ snowReport().snowTop }}
      </div>
      <div class="text-sm text-slate-600 mt-1">
        <span data-i18n="snow.top">Cima</span> (cm)
      </div>
    </div>

    <!-- Snow Quality -->
    <div
      class="col-span-2 md:col-span-1 text-center p-4 rounded-lg"
      [ngClass]="getQualityColor(snowReport().snowQuality)"
    >
      <div class="text-lg font-semibold">
        {{ getQualityLabel(snowReport().snowQuality) }}
      </div>
      <div class="text-sm mt-1">
        <span data-i18n="snow.quality">Calidad</span>
      </div>
    </div>
  </div>

  <!-- Recent Snowfall -->
  <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
    <div
      class="flex items-center justify-between p-4 border border-gray-200 rounded-lg"
    >
      <div>
        <div class="text-sm text-slate-600">
          <span data-i18n="snow.new_24h">√öltima 24h</span>
        </div>
        <div class="text-2xl font-bold text-green-600">
          {{ snowReport().snowNew24h }} cm
        </div>
      </div>
      <span class="text-3xl">‚òÉÔ∏è</span>
    </div>

    <div
      class="flex items-center justify-between p-4 border border-gray-200 rounded-lg"
    >
      <div>
        <div class="text-sm text-slate-600">
          <span data-i18n="snow.new_48h">√öltimas 48h</span>
        </div>
        <div class="text-2xl font-bold text-green-600">
          {{ snowReport().snowNew48h }} cm
        </div>
      </div>
      <span class="text-3xl">üå®Ô∏è</span>
    </div>

    <div
      class="flex items-center justify-between p-4 border border-gray-200 rounded-lg"
    >
      <div>
        <div class="text-sm text-slate-600">
          <span data-i18n="snow.new_7days">√öltimos 7 d√≠as</span>
        </div>
        <div class="text-2xl font-bold text-green-600">
          {{ snowReport().snowNew7days }} cm
        </div>
      </div>
      <span class="text-3xl">‚ùÑÔ∏è</span>
    </div>
  </div>

  <!-- Weather Conditions -->
  <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
    <!-- Temperature -->
    <div class="p-4 bg-gradient-to-br from-orange-50 to-orange-100 rounded-lg">
      <div class="flex items-center gap-3 mb-2">
        <span class="text-3xl">üå°Ô∏è</span>
        <div>
          <div class="text-sm text-slate-600">
            <span data-i18n="weather.temperature">Temperatura</span>
          </div>
          <div class="text-2xl font-bold text-slate-900">
            {{ snowReport().temperature.current }}¬∞C
          </div>
        </div>
      </div>
      <div class="text-sm text-slate-600">
        Min: {{ snowReport().temperature.min }}¬∞C ¬∑ Max:
        {{ snowReport().temperature.max }}¬∞C
      </div>
    </div>

    <!-- Wind -->
    <div class="p-4 bg-gradient-to-br from-sky-50 to-sky-100 rounded-lg">
      <div class="flex items-center gap-3 mb-2">
        <span class="text-3xl">üí®</span>
        <div>
          <div class="text-sm text-slate-600">
            <span data-i18n="weather.wind">Viento</span>
          </div>
          <div class="text-2xl font-bold text-slate-900">
            {{ snowReport().wind.speed }} km/h
          </div>
        </div>
      </div>
      <div class="text-sm text-slate-600">
        <span data-i18n="weather.direction">Direcci√≥n:</span>
        {{ snowReport().wind.direction }}
      </div>
    </div>

    <!-- Visibility -->
    <div class="p-4 bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg">
      <div class="flex items-center gap-3 mb-2">
        <span class="text-3xl">üëÅÔ∏è</span>
        <div>
          <div class="text-sm text-slate-600">
            <span data-i18n="weather.visibility">Visibilidad</span>
          </div>
          <div class="text-lg font-bold text-slate-900">
            {{ getVisibilityLabel(snowReport().visibility) }}
          </div>
        </div>
      </div>
      <div class="text-sm text-slate-600">
        <span data-i18n="snow.last_snowfall">√öltima nevada:</span>
        {{ snowReport().lastSnowfall }}
      </div>
    </div>
  </div>

  <!-- Alert banner if conditions are exceptional -->
  @if (snowReport().snowNew24h > 20) {
  <div
    class="mt-6 p-4 bg-green-50 border-l-4 border-green-500 rounded-lg flex items-start gap-3"
  >
    <span class="text-2xl">üéâ</span>
    <div>
      <div class="font-semibold text-green-900">
        <span data-i18n="alert.powder_day">¬°D√≠a de polvo!</span>
      </div>
      <div class="text-sm text-green-700">
        <span data-i18n="alert.fresh_snow"
          >Condiciones excepcionales con nieve reciente</span
        >
      </div>
    </div>
  </div>
  }
</div>
